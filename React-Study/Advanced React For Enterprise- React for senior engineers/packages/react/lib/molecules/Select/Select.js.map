{"version":3,"file":"Select.js","sources":["../../../src/molecules/Select/Select.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport Text from \"../../atoms/Text\";\ninterface SelectOption {\n  label: string;\n  value: string;\n}\n\ninterface RenderOptionProps {\n  isSelected: boolean;\n  option: SelectOption;\n  getOptionRecommendedProps: (overrideProps?: Object) => Object;\n}\n\ninterface SelectProps {\n  onOptionSelected?: (option: SelectOption, optionIndex: number) => void;\n  options?: SelectOption[];\n  label?: string;\n  renderOption?: (props: RenderOptionProps) => React.ReactNode;\n}\n\nconst Select: React.FC<SelectProps> = ({\n  options = [],\n  label = \"Please select an option ...\",\n  onOptionSelected: handler,\n  renderOption,\n}) => {\n  const labelRef = useRef<HTMLButtonElement>(null);\n  const [overlayTop, setOverlayTop] = useState<number | undefined>(undefined);\n  useEffect(() => {\n    setOverlayTop((labelRef.current?.offsetHeight || 0) + 10);\n  }, [labelRef.current?.offsetHeight]);\n\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const [selectedIndex, setSelectedIndex] = useState<number | undefined>(\n    undefined\n  );\n  const onOptionSelected = (option: SelectOption, optionIndex: number) => {\n    setIsOpen(false);\n    setSelectedIndex(optionIndex);\n    if (handler) {\n      handler(option, optionIndex);\n    }\n  };\n  const onLabelClick = () => {\n    setIsOpen(!isOpen);\n  };\n\n  const selectedOption = useMemo(\n    () => (selectedIndex === undefined ? label : options[selectedIndex].label),\n    [options, selectedIndex]\n  );\n\n  return (\n    <div className=\"dse-select\">\n      <button\n        className=\"dse-select__label\"\n        onClick={() => onLabelClick()}\n        ref={labelRef}\n      >\n        <Text>{selectedOption}</Text>\n        {caretIcon(isOpen)}\n      </button>\n      {isOpen && (\n        <ul style={{ top: overlayTop }} className=\"dse-select__overlay\">\n          {options.map((option, optionIndex) => {\n            const isSelected = selectedIndex === optionIndex;\n\n            const renderOptionProps: RenderOptionProps = {\n              isSelected,\n              option,\n              getOptionRecommendedProps: (overrideProps = {}) => {\n                return {\n                  className: `dse-select__option ${\n                    isSelected ? \"dse-select__option--selected\" : \"\"\n                  }`,\n                  onClick: () => onOptionSelected(option, optionIndex),\n                  key: option.value,\n                  ...overrideProps,\n                };\n              },\n            };\n            if (renderOption) {\n              return renderOption(renderOptionProps);\n            }\n            return (\n              <li\n                className={`dse-select__option ${\n                  isSelected ? \"dse-select__option--selected\" : \"\"\n                }`}\n                onClick={() => onOptionSelected(option, optionIndex)}\n                key={option.value}\n              >\n                <Text>{option.label}</Text>\n                {isSelected && checkIcon}\n              </li>\n            );\n          })}\n        </ul>\n      )}\n    </div>\n  );\n};\nconst caretIcon = (isOpen: boolean) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className={`h-6 w-6 dse-select__caret ${\n        isOpen ? \"dse-select__caret--open\" : \"dse-select__caret--closed\"\n      }`}\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n      width=\"1rem\"\n      height=\"1rem\"\n      strokeWidth={2}\n    >\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 9l-7 7-7-7\" />\n    </svg>\n  );\n};\nconst checkIcon = (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"h-6 w-6\"\n    fill=\"none\"\n    viewBox=\"0 0 24 24\"\n    stroke=\"currentColor\"\n    width=\"1rem\"\n    height=\"1rem\"\n    strokeWidth={2}\n  >\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" />\n  </svg>\n);\nexport default Select;\n"],"names":[],"mappings":"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"}