<!DOCTYPE html>
<html>
<head>
  <style>
    .box {
      width: 100px;
      height: 100px;
      background-color: coral;
      border: 5px solid orange;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="box"></div>
  <script>
    const $box = document.querySelector('.box');
    // offset : 드래그 시작시 포인터 위치와 박스 위치값의 상대거리
    const offset = { x: 0, y: 0 };

    // 박스 위치값
    const boxPosition = { x: 0, y: 0 }

    const move = e => {
      boxPosition.x = e.clientX - offset.x;
      boxPosition.y = e.clientY - offset.y;
      // translate3d 는 GPU를 사용하므로 absolute의 top/left보다 빠르고, top/left는 레이아웃에 영향을 준다.
      $box.style.transform = `translate3d(${boxPosition.x}px, ${boxPosition.y}px, 0)`;
    }
    $box.addEventListener('mousedown', e => {
      offset.x = e.clientX - boxPosition.x;
      offset.y = e.clientY - boxPosition.y;
      // box에다가 핸들러를 등록하면 너무 빨리 움직일 때, 마우스가 박스밖으로 나가는 순간 멈춘다.
      document.addEventListener('mousemove', move);
    })

    document.addEventListener('mouseup', () => {
      // 핸들러 제거는 핸들러 등록과 똑같은 형태로 해줘야한다.
      document.removeEventListener('mousemove', move);
    })

  </script>
</body>
</html>
